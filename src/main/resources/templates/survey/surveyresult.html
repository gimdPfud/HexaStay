<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>설문조사 결과</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; font-family: 'Noto Sans KR', sans-serif; }
        .result-container { max-width: 900px; margin: 40px auto; background: #fff; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); padding: 32px; }
        .result-title { color: #1D6F42; font-weight: 700; margin-bottom: 24px; }
        .stat-table th, .stat-table td { text-align: center; }
        .stat-table th { background: #f1f3f5; }
        .stat-table { margin-bottom: 32px; }
        .participant-table th, .participant-table td { text-align: center; }
        .participant-table th { background: #e9ecef; }
        .participant-table { font-size: 0.97rem; }
        .no-data { color: #888; text-align: center; padding: 40px 0; }
    </style>
</head>
<body>
<div class="result-container">
    <h2 class="result-title" th:text="${survey.surveyTitle}">설문조사 제목</h2>
    <div class="mb-4">
        <strong>설문 설명:</strong> <span th:text="${survey.surveyContent}">설문 설명</span>
    </div>
    <div class="mb-4">
        <strong>참여 인원:</strong> <span th:text="${participantCount}">0</span>명
    </div>
    <table class="table table-bordered stat-table">
        <thead>
        <tr>
            <th>전체 평균</th>
            <th>청결도</th>
            <th>직원 친절도</th>
            <th>체크인/아웃</th>
            <th>시설</th>
            <th>음식</th>
            <th>가성비</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td th:text="${#numbers.formatDecimal(averageRating, 1, 2)}">0.00</td>
            <td th:text="${#numbers.formatDecimal(cleanlinessAvg, 1, 2)}">0.00</td>
            <td th:text="${#numbers.formatDecimal(staffAvg, 1, 2)}">0.00</td>
            <td th:text="${#numbers.formatDecimal(checkInOutAvg, 1, 2)}">0.00</td>
            <td th:text="${#numbers.formatDecimal(facilityAvg, 1, 2)}">0.00</td>
            <td th:text="${#numbers.formatDecimal(foodAvg, 1, 2)}">0.00</td>
            <td th:text="${#numbers.formatDecimal(valueAvg, 1, 2)}">0.00</td>
        </tr>
        </tbody>
    </table>

    <h4 class="mt-5 mb-3">참여자 리스트</h4>
    <div th:if="${#lists.isEmpty(responses)}" class="no-data">
        참여자가 없습니다.
    </div>
    <table class="table table-striped table-bordered participant-table" th:if="${!#lists.isEmpty(responses)}">
        <thead>
        <tr>
            <th>이메일</th>
            <th>객실명</th>
            <th>청결도</th>
            <th>직원</th>
            <th>체크인/아웃</th>
            <th>시설</th>
            <th>음식</th>
            <th>가성비</th>
            <th>코멘트</th>
            <th>제출일</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="r : ${responses}">
            <td th:text="${r.member != null ? r.member.memberEmail : '-'}">이메일</td>
            <td th:text="${r.room != null && r.room.hotelRoom != null ? r.room.hotelRoom.hotelRoomName : '-'}">객실명</td>
            <td th:text="${r.surveyResultCleanliness}">0</td>
            <td th:text="${r.surveyResultStaff}">0</td>
            <td th:text="${r.surveyResultCheckInOut}">0</td>
            <td th:text="${r.surveyResultFacility}">0</td>
            <td th:text="${r.surveyResultFood}">0</td>
            <td th:text="${r.surveyResultValue}">0</td>
            <td th:text="${r.surveyResultComment}">-</td>
            <td th:text="${#temporals.format(r.surveyResultSubmittedAt, 'yyyy-MM-dd HH:mm')}">-</td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>