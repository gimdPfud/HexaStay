<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>목록</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--부트스트랩 스타일시트(HTML 속성)-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet">
  <!--부트스트랩에 효과 지정-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!--이건 그냥.. 추가한 부트스트랩 아이콘 ^_^-->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
<div class="container">
  <div class="row mt-3">
    <div class="col-1"></div><!--오른쪽여백-->
    <div class="col-10">
      <!--검색-->
      <form th:action="@{/list}" method="get"><!--Mapping이름을 참고...-->
        <div class="input-group mb-3">
          <select name="type" class="form-select">
            <option value="" th:selected="${type==null}">검색 조건</option>
            <option value="s" th:selected="${type=='s'}" >제목</option>
            <option value="c" th:selected="${type=='c'}" >내용</option>
            <option value="a" th:selected="${type=='a'}" >작성자</option>
            <option value="sc" th:selected="${type=='sc'}" >제목+내용</option>
            <option value="sca" th:selected="${type=='sca'}" >제목+내용+작성자</option>
          </select>
          <input class="form-control" th:value="${keyword}" name="keyword" type="text" >
          <button class="btn btn-info" type="submit" >검색</button>
          <button class="btn btn-secondary" type="reset" >초기화</button>
          <button type="button" th:onclick="|location.href='@{/create}'|"
                  class="btn btn-success">글등록</button>
        </div>
      </form>

      <!--등록버튼-->
      <!--            <div class="btns mb-3">-->
      <!--                <a th:href="@{/create}" class="btn btn-success">등록</a>-->
      <!--                <button type="button" th:onclick="|location.href='@{/create}'|"-->
      <!--                        class="btn btn-success">등록버튼</button>&lt;!&ndash;버튼을 클릭했을 때 해당 주소로 이동. a태그보다 좀 느림...&ndash;&gt;-->
      <!--            </div>-->

      <!--목록-->
      <table class="mb-3 table table-bordered text-center">
        <!--표 : 한줄에 내용 표현 가능. 카드 : 한줄로 작성 불가능.-->
        <!--하나의 데이터를 전달:data, 여러개:list-->
        <thead>
        <tr><!--dto변수참고.-->
          <th >번호</th>
          <th >제목</th>
          <th >작성자</th>
          <th >날짜</th>
          <th >작업</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="data:${list}">
          <td th:text="${data.boardNum}"></td>
          <td th:text="${data.boardTitle}"></td>
          <td th:text="${data.boardWriter}"></td>
          <td th:text="${#temporals.format(data.modifyDate,'yyyy-MM-dd')}"></td>
          <td>
            <a th:href="@{/detail(id=${data.id})}" class="btn btn-secondary">
              <i class="bi-clipboard-check"></i>
            </a>
          </td>
        </tr>
        </tbody>
      </table>
      startPage: [[${startPage}]],  currentPage: [[${currentPage}]], endPage: [[${endPage}]]
      <!--페이지버튼-->
      <ul class="pagination justify-content-center">
        <li class="page-item" th:unless="${startPage==1}">
          <a class="page-link" th:href="@{/list(page=1, keyword=${keyword}, type=${type})}"><i class="bi-caret-left-fill"></i></a>
        </li><!--첫페이지-->
        <!--                <li class="page-item" th:unless="${currentPage==1}">-->
        <!--                    <a class="page-link" th:href="@{/list(page=${prevPage}, keyword=${keyword}, type=${type})}"><i class="bi-caret-left"></i></a>-->
        <!--                </li>&lt;!&ndash;이전&ndash;&gt;-->
        <li th:each="page : ${#numbers.sequence(startPage,endPage,1)}"
            th:class="${page==currentPage}?'active page-item':'page-item'">
          <a class="page-link" th:href="@{/list(page=${page}, keyword=${keyword}, type=${type})}" th:text="${page}"></a>
        </li><!--숫자들-->
        <li class="page-item" th:unless="${lastPage<=currentPage}">
          <a class="page-link" th:href="@{/list(page=${nextPage}, keyword=${keyword}, type=${type})}"><i class="bi-caret-right"></i></a>
        </li><!--다음-->
        <!--                <li class="page-item" th:unless="${endPage==lastPage}">-->
        <!--                    <a class="page-link" th:href="@{/list(page=${lastPage}, keyword=${keyword}, type=${type})}"><i class="bi-caret-right-fill"></i></a>-->
        <!--                </li>&lt;!&ndash;마지막&ndash;&gt;-->
      </ul>

    </div><!--작업영역-->
    <div class="col-1"></div><!--왼쪽여백-->
  </div><!--row끝-->
</div><!--container끝-->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script th:inline="javascript">
  function changelang() {
    param = {
      long : lang
    }

    $.ajax({
      type: "GET",
      url: "/changeLang",
      data: {
        Lang : long
      }
    })

  }
</script>
</body>
</html>