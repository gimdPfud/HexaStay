<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>본사 수정</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body class="w-100 vh-100 bg-light">

<div class="container p-4 rounded shadow-sm w-100 h-100" style="max-width: 400px;">
    <div class="d-flex justify-content-center">
        <h2 class="text-center mb-4">본사 수정</h2>
    </div>

    <div class="d-flex w-100" style="justify-content: center;">
        <img src="https://via.placeholder.com/103x133" class="rounded" style="width: 103px; height: 133px;">
    </div>

    <form th:action="@{/center/update}" method="post">
        <input type="hidden" name="centerNum" th:value="${centerDTO.centerNum}">
        <div class="mb-2">
            <label class="form-label">브랜드명</label>
            <input type="text" name="centerBrand" id="centerBrand" class="form-control" th:value="${centerDTO.centerBrand}">
        </div>
        <div class="mb-2">
            <label class="form-label">상호명</label>
            <input type="text" name="centerName" id="centerName" class="form-control" th:value="${centerDTO.centerName}">
        </div>
        <div class="mb-2">
            <label class="form-label">사업자등록번호</label>
            <div class="row g-2">
                <div class="col">
                    <input type="text" id="centerBusinessNumOne" class="form-control" readonly style="background: #cccccc"
                           th:value="${#strings.substring(centerDTO.centerBusinessNum, 0, 3)}">
                </div>
                <div class="col-auto">-</div>
                <div class="col">
                    <input type="text" id="centerBusinessNumTwo" class="form-control" readonly style="background: #cccccc"
                           th:value="${#strings.substring(centerDTO.centerBusinessNum, 4, 6)}">
                </div>
                <div class="col-auto">-</div>
                <div class="col">
                    <input type="text" id="centerBusinessNumThree" class="form-control" readonly style="background: #cccccc"
                           th:value="${#strings.substring(centerDTO.centerBusinessNum, 7, 12)}">
                </div>
                <input hidden type="text" id="centerBusinessNum" name="centerBusinessNum" th:value="${centerDTO.centerBusinessNum}">
            </div>
        </div>
        <div class="mb-2">
            <label class="form-label">대표자명</label>
            <input type="text" name="centerCeoName" id="centerCeoName" class="form-control" th:value="${centerDTO.centerCeoName}">
        </div>
        <div class="mb-2">
            <label class="form-label">전화번호</label>
            <div class="row g-2">
                <div class="col-4">
                    <select id="centerPhoneone" class="form-select" th:value="${#strings.substring(centerDTO.centerPhone, 0, centerDTO.centerPhone.indexOf('-'))}">
                        <option>02</option>
                        <option>031</option>
                        <option>032</option>
                        <option>041</option>
                    </select>
                </div>
                <div class="col-auto">-</div>
                <div class="col-3">
                    <input type="text" id="centerPhonetwo" class="form-control"
                           th:value="${#strings.substring(centerDTO.centerPhone, centerDTO.centerPhone.indexOf('-') + 1, centerDTO.centerPhone.lastIndexOf('-'))}">
                </div>
                <div class="col-auto">-</div>
                <div class="col-4">
                    <input type="text" id="centerPhonethree" class="form-control"
                           th:value="${#strings.substring(centerDTO.centerPhone, centerDTO.centerPhone.lastIndexOf('-') + 1)}">
                </div>
                <input hidden name="centerPhone" id="centerPhone" th:value="${centerDTO.centerPhone}">
            </div>
        </div>

        <div class="mb-2">
            <label class="form-label">이메일</label>
            <input type="email" name="centerEmail" id="email" class="form-control" th:value="${centerDTO.centerEmail}">
        </div>
        <div class="mb-4">
            <label class="form-label">주소</label>
            <input name="centerAddress" type="text" id="centerAddress" class="form-control" th:value="${centerDTO.centerAddress}">
        </div>
        <div class="d-flex justify-content-center gap-3">
            <a th:href="@{/center/list}" class="btn btn-secondary">취소</a>
            <button type="submit" class="btn btn-success" onclick="submitForm()">저장</button>
        </div>
    </form>

    <script>
        // 수정양식 관련
        function submitForm() {
            // 사업자등록번호 합체
            // 폰번호 합체
            document.getElementById('centerPhone').value = document.getElementById('centerPhoneone').value + "-" + document.getElementById('centerPhonetwo').value + "-" + document.getElementById('centerPhonethree').value;
        }

        // 사업자번호 표기용
        let centerBusinessNum = document.getElementById("centerBusinessNum").value;

    </script>

</div>
</body>
</html>
