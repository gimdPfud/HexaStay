<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>본사 수정</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body class="w-100 vh-100 bg-light">

<div class="container p-4 rounded shadow-sm w-100 h-100" style="max-width: 400px;">
    <div class="d-flex justify-content-center">
        <h2 class="text-center mb-4">지사 수정</h2>
    </div>

    <div class="d-flex w-100" style="justify-content: center;">
        <img src="https://via.placeholder.com/103x133" class="rounded" style="width: 103px; height: 133px;">
    </div>

    <form th:action="@{/center/modify/{centerNum}(centerNum=${branchDTO.centerNum})}" method="post">
        <input type="hidden" name="centerNum" th:value="${branchDTO.centerNum}">
        <div class="mb-2">
            <label class="form-label">브랜드명</label>
            <select name="centerBrand" class="form-select">
                <option value="">선택하세요</option>
                <option th:each="brand : ${centerBrandList}"
                        th:value="${brand}"
                        th:text="${brand}"
                        th:selected="${brand == branchDTO.centerBrand}">
                </option>
            </select>
        </div>

        <!-- 본사명 -->
        <div class="mb-2">
            <label class="form-label">본사명</label>
            <select name="centerName" class="form-select">
                <option value="">선택하세요</option>
                <option th:each="name : ${centerNameList}"
                        th:value="${name}"
                        th:text="${name}"
                        th:selected="${name == branchDTO.centerName}">
                </option>
            </select>
        </div>
        <div class="mb-2">
            <label class="form-label">상호명</label>
            <input type="text" name="branchName" id="branchName" class="form-control" th:value="${branchDTO.branchName}">
        </div>
        <div class="mb-2">
            <label class="form-label">사업자등록번호</label>
            <div class="row g-2">
               <div class="col">
                    <input type="text" id="branchBusinessNumOne" class="form-control" readonly style="background: #cccccc">
                </div>
                <div class="col-auto">-</div>
                <div class="col">
                    <input type="text" id="branchBusinessNumTwo" class="form-control" readonly style="background: #cccccc">
                </div>
                <div class="col-auto">-</div>
                <div class="col">
                    <input type="text" id="branchBusinessNumThree" class="form-control" readonly style="background: #cccccc">
                </div>
                <input hidden type="text" id="branchBusinessNum" name="branchBusinessNum" th:value="${branchDTO.branchBusinessNum}">
            </div>
        </div>
        <div class="mb-2">
            <label class="form-label">대표자명</label>
            <input type="text" name="branchCeoName" id="branchCeoName" class="form-control" th:value="${branchDTO.branchCeoName}">
        </div>
        <div class="mb-2">
            <label class="form-label">전화번호</label>
            <div class="row g-2">
                <div class="col">
                    <select id="branchPhoneone" class="form-select">
                        <option>02</option>
                        <option>031</option>
                        <option>032</option>
                        <option>041</option>
                    </select>
                </div>
                <div class="col-auto">-</div>
                <div class="col">
                    <input type="text" id="branchPhonetwo" class="form-control">
                </div>
                <div class="col-auto">-</div>
                <div class="col">
                    <input type="text" id="branchPhonethree" class="form-control">
                </div>
                <input hidden name="branchPhone" id="branchPhone" th:value="${branchDTO.branchPhone}">
            </div>
        </div>

        <div class="mb-2">
            <label class="form-label">이메일</label>
            <input type="email" name="branchEmail" id="email" class="form-control" th:value="${branchDTO.branchEmail}">
        </div>
        <div class="mb-4">
            <label class="form-label">주소</label>
            <input name="branchAddress" type="text" id="branchAddress" class="form-control" th:value="${branchDTO.branchAddress}">
        </div>
        <div class="d-flex justify-content-center gap-3">
            <a th:href="@{/center/list}" class="btn btn-secondary">취소</a>
            <button type="submit" class="btn btn-success" onclick="submitForm()">저장</button>
        </div>
    </form>

    <script>
        // 수정양식 관련
        function submitForm() {
            // 사업자등록번호 합체
            // 폰번호 합체
            document.getElementById('branchPhone').value = document.getElementById('branchPhoneone').value + "-" + document.getElementById('branchPhonetwo').value + "-" + document.getElementById('branchPhonethree').value;
        }

        // 사업자번호 표기용
        let branchBusinessNum = document.getElementById("branchBusinessNum").value;

        // "-" 기준으로 나누기
        let BusinessParts = branchBusinessNum.split("-");

        // 변수에 각각 저장
        document.getElementById("branchBusinessNumOne").value = BusinessParts[0];  // 첫 번째 3자리 숫자
        document.getElementById("branchrBusinessNumTwo").value = BusinessParts[1];  // 두 번째 2자리 숫자
        document.getElementById("branchBusinessNumThree").value = BusinessParts[2]; // 세 번째 5자리 숫자


        // 사업자번호 표기용
        let branchPhoneNum = document.getElementById("branchPhone").value;

        // "-" 기준으로 나누기
        let PhoneParts = branchPhoneNum.split("-");

        let selectBox = document.getElementById("branchPhoneone");
        let phoneValue = PhoneParts[0];


        document.getElementById("branchPhoneone").value = PhoneParts[0];  // 1번째
        document.getElementById("branchPhonetwo").value = PhoneParts[1];  // 2번째
        document.getElementById("branchPhonethree").value = PhoneParts[2]; // 3번째

    </script>

</div>
</body>
</html>
